# Step 3: Mars ?뚯씪 遺꾩꽍 寃곌낵

> ?명듃濡?mars? ?섎같?꾨컲媛쒖슂.mars ?뚯씪 遺꾩꽍 ?꾨즺

## ?뱤 遺꾩꽍 媛쒖슂

### ?뚯씪 ?щ㎎ 諛쒓껄

.mars ?뚯씪? ?ㅼ쓬怨?媛숈? 援ъ“瑜?媛吏묐땲??

```
.mars ?뚯씪 援ъ“:
?쒋?? GZIP ?뺤텞 怨꾩링 (outer layer)
?붴?? 而ㅼ뒪? 諛붿씠?덈━ ?щ㎎ (inner layer)
    ?쒋?? ?뱀뀡 援ъ“: [4諛붿씠??湲몄씠][UTF-16LE ?대쫫][4諛붿씠???곗씠??湲몄씠][?곗씠??
    ?쒋?? Section 0: VersionInfo (JSON)
    ?쒋?? Section 1: ContentsInfo (JSON) ??怨꾩링 援ъ“ + 媛앹껜 ?뺣낫
    ?쒋?? Section 2: EnvironmentInfo
    ?쒋?? Section 3: Resources (諛붿씠?덈━)
    ?쒋?? Section 4: ModelData
    ?쒋?? Section 5: EnvironmentImageData
    ?쒋?? Section 6: TTSData
    ?쒋?? Section 7: ResourceListInfo
    ?붴?? Section 8: MARS_ONLY_DATA
```

### ?뚯떛 ?꾧뎄

**Parse-MarsFile.ps1**:
- GZIP ?뺤텞 ?댁젣
- 諛붿씠?덈━ ?뱀뀡 ?쒖감 ?쎄린
- ?뱀뀡蹂??곗씠??異붿텧 諛????

## ?뱚 遺꾩꽍 寃곌낵 ?뚯씪

### analysis_temp/intro/
- `ContentsInfo.json` - ?꾩껜 怨꾩링 援ъ“ 諛?媛앹껜 ?뺣낫
- `object_list.csv` - 紐⑤뱺 媛앹껜 紐⑸줉 (ID, ?대쫫, ??? 遺紐? ?쒖꽦???곹깭)
- `version_info.json` - 肄섑뀗痢?硫뷀??곗씠??
- `section_*_*.bin` - 媛??뱀뀡???먮낯 諛붿씠?덈━ ?곗씠??

### analysis_temp/overview/
- ?숈씪??援ъ“

## ?렞 ?명듃濡?mars 遺꾩꽍

### 湲곕낯 ?뺣낫

| ??ぉ | 媛?|
|------|-----|
| ?뚯씪 ?ш린 | 1,601,970 bytes (1.6 MB) |
| ?뺤텞 ?댁젣 ??| 2,210,061 bytes (2.2 MB) |
| ???湲곌린 | Meta Quest 3 |
| Make 踰꾩쟾 | 2.10.0.8.8460.0 |
| ?댁긽??| 2560 x 1600 |

### 媛앹껜 ?듦퀎

| ???| 媛쒖닔 | ?ㅻ챸 |
|------|------|------|
| scene_group | 1 | ??洹몃９ |
| scene | 1 | Intro ??|
| empty/group (Type 102) | ~20 | 洹몃９ 而⑦뀒?대꼫 |
| image (Type 112) | ?ㅼ닔 | ?대?吏 媛앹껜 |
| audio (Type 111) | 1 | BGM |
| text (Type 101) | 1 | TTS ?띿뒪??|

### 怨꾩링 援ъ“

```
ROOT
?붴?? [scene_group] [?대━???좉린?좉탳?≪썝] Template
    ?붴?? [scene] Intro
        ?쒋?? [empty] img_txt_logo (4.5s)
        ??  ?쒋?? [image] img_K
        ??  ?쒋?? [image] img_O
        ??  ?쒋?? [image] img_R
        ??  ?쒋?? [image] img_E
        ??  ?쒋?? [image] img_A
        ??  ?쒋?? [image] img_P
        ??  ?쒋?? [image] img_O
        ??  ?쒋?? [image] img_L
        ??  ?쒋?? [image] img_Y
        ??  ?쒋?? [image] img_T
        ??  ?쒋?? [image] img_E
        ??  ?쒋?? [image] img_C
        ??  ?쒋?? [image] img_H
        ??  ?쒋?? [image] img_N
        ??  ?쒋?? [image] img_I
        ??  ?쒋?? [image] img_C
        ??  ?쒋?? [image] img_S
        ??  ?쒋?? [image] img_pic
        ??  ?붴?? [image] img_pic_White
        ?쒋?? [image] logo_main (蹂寃쏀븯湲?
        ?쒋?? [image] logo_sub (蹂寃쏀븯湲?
        ?쒋?? [image] btn_Start (蹂寃쏀븯湲?
        ?쒋?? [text] TTS (蹂寃쏀븯湲?
        ?붴?? [audio] BGM
```

## ?렞 ?섎같?꾨컲媛쒖슂.mars 遺꾩꽍

### 湲곕낯 ?뺣낫

| ??ぉ | 媛?|
|------|-----|
| ?뚯씪 ?ш린 | 1,213 bytes (1.2 KB) |
| ?뺤텞 ?댁젣 ??| 3,794 bytes (3.7 KB) |
| ???湲곌린 | Meta Quest 3 |
| Make 踰꾩쟾 | 2.10.0.8.8460.0 |

### 媛앹껜 ?듦퀎

留ㅼ슦 ?⑥닚??援ъ“ (嫄곗쓽 鍮?肄섑뀗痢?:
- scene_group: 1
- scene: 1
- 湲고? 媛앹껜: 理쒖냼

## ?뵇 二쇱슂 諛쒓껄?ы빆

### 1. 媛앹껜 ???肄붾뱶

| 肄붾뱶 | ???| ?ㅻ챸 |
|------|------|------|
| 2 | scene_group | ??洹몃９ 而⑦뀒?대꼫 |
| 3 | scene | ??(?붾㈃ ?⑥쐞) |
| 101 | text | ?띿뒪??媛앹껜 |
| 102 | empty | 鍮?媛앹껜 (洹몃９?? |
| 111 | audio | ?ㅻ뵒??媛앹껜 |
| 112 | image | ?대?吏 媛앹껜 |
| 110 | video | 鍮꾨뵒??媛앹껜 (?명듃濡쒖뿏 ?놁쓬) |

### 2. ContentsInfo 援ъ“

ContentsInfo ?뱀뀡? **怨꾩링??JSON 援ъ“**濡???λ릺???덉뒿?덈떎:

```json
{
  "GUID": {
    "PropertyInfo": {
      "ComponentName": "?대쫫",
      "ComponentType": ??낆퐫??
      "Active": true/false,
      ...
    },
    "Transform": { ... },
    "Interaction": { ... },
    "Child": {
      "ChildGUID": { ... }
    }
  }
}
```

### 3. 由ъ냼???뺣낫

- **Resources ?뱀뀡** (Section 3): ?ㅼ젣 ?대?吏, ?ㅻ뵒???뚯씪??諛붿씠?덈━ ?곗씠??
- **ResourceListInfo ?뱀뀡** (Section 7): 由ъ냼??硫뷀??곗씠??(?뚯씪紐? 寃쎈줈, ?ш린 ??

## ?뱥 ?ㅼ쓬 ?④퀎 (Step 4)

### 1. TOML 蹂??

ContentsInfo.json??TOML ?뺤떇?쇰줈 蹂??
- `tree.toml` ?앹꽦 (怨꾩링 援ъ“)
- `objects/<GUID>/object.toml` ?앹꽦 (媛?媛앹껜 ?띿꽦)

### 2. 由ъ냼??異붿텧

Resources 諛?ResourceListInfo ?뱀뀡 ?뚯떛?섏뿬:
- ?대?吏 ?뚯씪 異붿텧
- ?ㅻ뵒???뚯씪 異붿텧
- `resource/` ?대뜑?????

### 3. MarsCatalogue ?낅뜲?댄듃

異붿텧???곗씠?곕? MarsCatalogue??諛섏쁺:
```
Contents/
?쒋?? ?명듃濡?
??  ?쒋?? tree.toml (?앹꽦)
??  ?붴?? objects/
??      ?쒋?? <GUID_1>/
??      ??  ?붴?? object.toml (?앹꽦)
??      ?쒋?? <GUID_2>/
??      ??  ?붴?? object.toml
??      ?붴?? ...
?붴?? ?섎같?꾨컲媛쒖슂/
    ?붴?? (?숈씪 援ъ“)
```

## ?썱 ?ъ슜 媛?ν븳 紐낅졊

### ?꾩껜 遺꾩꽍 ?ъ떎??

```powershell
# ?명듃濡??뚯떛
.\Parse-MarsFile.ps1 -MarsFilePath "Contents/?명듃濡?mars" -OutputPath "analysis_temp/intro"

# ?섎같?꾨컲媛쒖슂 ?뚯떛
.\Parse-MarsFile.ps1 -MarsFilePath "Contents/?섎같?꾨컲媛쒖슂.mars" -OutputPath "analysis_temp/overview"
```

### 媛앹껜 紐⑸줉 ?뺤씤

```powershell
# CSV濡??뺤씤
Import-Csv "analysis_temp/intro/object_list.csv" | Format-Table

# JSON ?먯깋
Get-Content "analysis_temp/intro/ContentsInfo.json" -Raw | ConvertFrom-Json
```

### ?뱀젙 媛앹껜 ?곸꽭 ?뺤씤

```powershell
# ContentsInfo.json?먯꽌 ?뱀젙 GUID 寃??
$json = Get-Content "analysis_temp/intro/ContentsInfo.json" -Raw | ConvertFrom-Json
# JSON 援ъ“瑜??쒗쉶?섎ŉ ?먰븯??媛앹껜 李얘린
```

## ??Step 3 ?꾨즺

- [x] .mars ?뚯씪 ?щ㎎ 遺꾩꽍 ?꾨즺
- [x] 諛붿씠?덈━ ?뚯꽌 援ы쁽 (Parse-MarsFile.ps1)
- [x] 紐⑤뱺 ?뱀뀡 異붿텧 ?꾨즺
- [x] ContentsInfo.json ?뚯떛 ?꾨즺
- [x] 媛앹껜 紐⑸줉 CSV ?앹꽦 ?꾨즺
- [x] 怨꾩링 援ъ“ ?뚯븙 ?꾨즺

**以鍮??꾨즺!** Step 4 (TOML 蹂??諛?由ъ냼??異붿텧)濡?吏꾪뻾?????덉뒿?덈떎.

